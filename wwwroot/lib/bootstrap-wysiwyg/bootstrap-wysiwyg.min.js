(function(n){function t(t){if(typeof t.data=="string"){var r=t.handler,i=t.data.toLowerCase().split(" "),u=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color"];t.handler=function(t){var s,c;if(this===t.target||!(/textarea|select/i.test(t.target.nodeName)||n.inArray(t.target.type,u)>-1)){var e=t.type!=="keypress"&&n.hotkeys.specialKeys[t.which],h=String.fromCharCode(t.which).toLowerCase(),f="",o={};for(t.altKey&&e!=="alt"&&(f+="alt+"),t.ctrlKey&&e!=="ctrl"&&(f+="ctrl+"),t.metaKey&&!t.ctrlKey&&e!=="meta"&&(f+="meta+"),t.shiftKey&&e!=="shift"&&(f+="shift+"),e?o[f+e]=!0:(o[f+h]=!0,o[f+n.hotkeys.shiftNums[h]]=!0,f==="shift+"&&(o[n.hotkeys.shiftNums[h]]=!0)),s=0,c=i.length;s<c;s++)if(o[i[s]])return r.apply(this,arguments)}}}}n.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};n.each(["keydown","keyup","keypress"],function(){n.event.special[this]={add:t}})})(jQuery),function(n){var t=function(t){function i(t,r=0){function f(){for(var n="",t=0;t<r;++t)n+="\t";return n}var r,t=n.parseHTML(t),u="",e=!1;return n.each(t,function(t,o){var c,s,h;o.nodeName=="#text"?(n(o).text().trim().length&&(u+=f()+n(o).text().trim()),e=!0):(c=n(o).html().trim(),n(o).html(c.replace("\n","").replace(/ +(?= )/g,"")),n(o).children().length?(n(o).html("\n"+i(c,r+1)+f()),h=n(o).prop("outerHTML").trim(),s="",e||(s=f()),u+=s+h+"\n"):(s="",e||(s=f()),h=n(o).prop("outerHTML").trim(),u+=s+h+"\n"),e=!1)}),u}return i(t.replace(/(\r\n|\n|\r)/gm," ").replace(/ +(?= )/g,""))};"use strict";var i=function(t,i){var r=t.find(".wysiwyg-fonts");n.each(["Serif","Sans","Arial","Arial Black","Courier","Courier New","Helvetica","Impact","Lucida Grande","Lucida Sans","Tahoma","Times","Times New Roman","Verdana"],function(t,i){r.append(n('<li><a data-edit="fontName '+i+'" style="font-family:\''+i+"'\">"+i+"<\/a><\/li>"))});t.find(".dropdown-menu").click(function(n){n.stopPropagation()});t.find(".dropdown-menu input[data-"+i.commandRole+"]").click(function(){return!1}).change(function(){n(this).parent(".dropdown-menu").siblings(".dropdown-toggle").dropdown("toggle")}).keydown("esc",function(){this.value="";n(this).change()});t.find("[data-role=magic-overlay]").each(function(){var t=n(this),i=n(this).prev();i.click(function(){t.click()})})},r=function(n,t,r){var u='<div class="btn-toolbar" data-role="editor-toolbar"> \t\t\t<div class="btn-group"> \t\t\t\t<a class="btn btn-default dropdown-toggle" data-toggle="dropdown" title="'+bootstrapWysiwyg.local.font+'"><i class="glyphicon glyphicon-font"><\/i><b class="caret"><\/b><\/a> \t\t\t\t<ul class="dropdown-menu wysiwyg-fonts"> \t\t\t\t<\/ul> \t\t\t\t<\/div>',f;return r.showFontSize&&(u+='<div class="btn-group"> \t\t\t\t<a class="btn btn-default dropdown-toggle" data-toggle="dropdown" title="'+bootstrapWysiwyg.local.fontSize+'"><i class="glyphicon glyphicon-text-height"><\/i>&nbsp;<b class="caret"><\/b><\/a> \t\t\t\t<ul class="dropdown-menu"> \t\t\t\t\t<li><a data-edit="fontSize 5"><font size="5">'+bootstrapWysiwyg.local.fontSizeHuge+'<\/font><\/a><\/li> \t\t\t\t\t<li><a data-edit="fontSize 3"><font size="3">'+bootstrapWysiwyg.local.fontSizeNormal+'<\/font><\/a><\/li> \t\t\t\t\t<li><a data-edit="fontSize 1"><font size="1">'+bootstrapWysiwyg.local.fontSizeSmall+"<\/font><\/a><\/li> \t\t\t\t<\/ul> \t\t\t<\/div>"),u+='<div class="btn-group"> \t\t\t\t<a class="btn btn-default" data-edit="formatBlock <h4>" title="'+bootstrapWysiwyg.local.header+'"><i class="glyphicon glyphicon-header"><\/i><\/a> \t\t\t\t<a class="btn btn-default" data-edit="formatBlock <h5>" title="'+bootstrapWysiwyg.local.subHeader+'"><i class="glyphicon glyphicon-header gn-richTextEditorSubHeader"><\/i><\/a> \t\t\t<\/div> \t\t\t<div class="btn-group"> \t\t\t\t<a class="btn btn-default" data-edit="bold" title="'+bootstrapWysiwyg.local.bold+'"><i class="glyphicon glyphicon-bold"><\/i><\/a> \t\t\t\t<a class="btn btn-default" data-edit="italic" title="'+bootstrapWysiwyg.local.italic+'"><i class="glyphicon glyphicon-italic"><\/i><\/a> \t\t\t\t<a class="btn btn-default" data-edit="strikethrough" title="'+bootstrapWysiwyg.local.strikeThrough+'"><i class="glyphicon glyphicon-font" style="text-decoration: line-through"><\/i><\/a> \t\t\t\t<a class="btn btn-default" data-edit="underline" title="'+bootstrapWysiwyg.local.underline+'"><i class="glyphicon glyphicon-font" style="text-decoration: underline"><\/i><\/a> \t\t\t<\/div> \t\t\t<div class="btn-group"> \t\t\t\t<a class="btn btn-default" data-edit="insertunorderedlist" title="'+bootstrapWysiwyg.local.bulletList+'"><i class="glyphicon glyphicon-list"><\/i><\/a> \t\t\t\t<a class="btn btn-default" data-edit="insertorderedlist" title="'+bootstrapWysiwyg.local.numberList+'"><i class="glyphicon glyphicon-th-list"><\/i><\/a> \t\t\t\t<a class="btn btn-default" data-edit="outdent" title="'+bootstrapWysiwyg.local.reduceIndent+'"><i class="glyphicon glyphicon-indent-right"><\/i><\/a> \t\t\t\t<a class="btn btn-default" data-edit="indent" title="'+bootstrapWysiwyg.local.indent+'"><i class="glyphicon glyphicon-indent-left"><\/i><\/a> \t\t\t<\/div> \t\t\t<div class="btn-group"> \t\t\t\t<a class="btn btn-default" data-edit="justifyleft" title="'+bootstrapWysiwyg.local.alignLeft+'"><i class="glyphicon glyphicon-align-left"><\/i><\/a> \t\t\t\t<a class="btn btn-default" data-edit="justifycenter" title="'+bootstrapWysiwyg.local.alignCenter+'"><i class="glyphicon glyphicon-align-center"><\/i><\/a> \t\t\t\t<a class="btn btn-default" data-edit="justifyright" title="'+bootstrapWysiwyg.local.alignRight+'"><i class="glyphicon glyphicon-align-right"><\/i><\/a> \t\t\t\t<a class="btn btn-default" data-edit="justifyfull" title="'+bootstrapWysiwyg.local.justifyFull+'"><i class="glyphicon glyphicon-align-justify"><\/i><\/a> \t\t\t<\/div> \t\t\t<div class="btn-group"> \t\t\t\t<a class="btn btn-default dropdown-toggle" data-toggle="dropdown" title="'+bootstrapWysiwyg.local.hyperlink+'"><i class="glyphicon glyphicon-link"><\/i><\/a> \t\t\t\t<div class="dropdown-menu input-append" style="padding: 10px"> \t\t\t\t\t<input class="form-control" placeholder="'+bootstrapWysiwyg.local.url+'" type="text" data-edit="createLink"/> \t\t\t\t\t<button class="btn btn-default" style="margin-top: 5px" type="button">'+bootstrapWysiwyg.local.hyperlinkAdd+'<\/button> \t\t\t\t<\/div> \t\t\t\t<a class="btn btn-default" data-edit="unlink" title="'+bootstrapWysiwyg.local.removeHyperlink+'"><i class="glyphicon glyphicon-link" style="text-decoration: line-through"><\/i><\/a> \t\t\t<\/div> \t\t\t\t\t\t<div class="btn-group"> \t\t\t\t<a class="btn btn-default" title="'+bootstrapWysiwyg.local.insertPicture+'"><i class="glyphicon glyphicon-picture"><\/i><\/a> \t\t\t\t<input type="file" data-role="magic-overlay" data-edit="insertImage" class="wysiwgEditor-imageUpload" /> \t\t\t<\/div> \t\t\t<div class="btn-group"> \t\t\t\t<a class="btn btn-default dropdown-toggle" data-toggle="dropdown" title="'+bootstrapWysiwyg.local.table+'"><i class="glyphicon glyphicon-th"><\/i><\/a> \t\t\t\t<div class="dropdown-menu input-append" style="padding: 10px"> \t\t\t\t\t<input class="form-control gn-table-columns" placeholder="'+bootstrapWysiwyg.local.columns+'" type="text"/> \t\t\t\t\t<input class="form-control gn-table-rows" placeholder="'+bootstrapWysiwyg.local.rows+'" type="text"/> \t\t\t\t\t<div class="checkbox"><label><input type="checkbox" class="gn-table-addHeader">'+bootstrapWysiwyg.local.addHeaderRow+'<\/label><\/div> \t\t\t\t\t<button class="btn btn-default gn-table-add" style="margin-top: 5px" type="button">'+bootstrapWysiwyg.local.tableAdd+'<\/button> \t\t\t\t<\/div> \t\t\t\t<a class="btn btn-default gn-table-add-row-after" disabled="disabled" title="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-disabletitle="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-enabletitle="'+bootstrapWysiwyg.local.tableAddRowAfter+'" data-editactiveinside="tr"><i class="glyphicon glyphicon-object-align-vertical wysiwgEditor-flipIcon"><\/i><\/a> \t\t\t\t<a class="btn btn-default gn-table-add-row-before" disabled="disabled" title="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-disabletitle="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-enabletitle="'+bootstrapWysiwyg.local.tableAddRowBefore+'" data-editactiveinside="tr"><i class="glyphicon glyphicon-object-align-vertical"><\/i><\/a> \t\t\t\t<a class="btn btn-default gn-table-remove-row" disabled="disabled" title="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-disabletitle="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-enabletitle="'+bootstrapWysiwyg.local.tableRemoveRow+'" data-editactiveinside="tr"><i class="glyphicon glyphicon-object-align-vertical"><\/i><i class="glyphicon glyphicon-remove wysiwgEditor-removeIcon"><\/i><\/a> \t\t\t\t<a class="btn btn-default gn-table-add-column-after" disabled="disabled" title="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-disabletitle="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-enabletitle="'+bootstrapWysiwyg.local.tableAddColumnAfter+'" data-editactiveinside="th,td"><i class="glyphicon glyphicon-object-align-horizontal"><\/i><\/a> \t\t\t\t<a class="btn btn-default gn-table-add-column-before" disabled="disabled" title="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-disabletitle="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-enabletitle="'+bootstrapWysiwyg.local.tableAddColumnBefore+'" data-editactiveinside="th,td"><i class="glyphicon glyphicon-object-align-horizontal wysiwgEditor-flipIcon"><\/i><\/a> \t\t\t\t<a class="btn btn-default gn-table-remove-column" disabled="disabled" title="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-disabletitle="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-enabletitle="'+bootstrapWysiwyg.local.tableRemoveColumn+'" data-editactiveinside="th,td"><i class="glyphicon glyphicon-object-align-horizontal"><\/i><i class="glyphicon glyphicon-remove wysiwgEditor-removeIcon"><\/i><\/a> \t\t\t\t<a class="btn btn-default gn-table-add-header-row" disabled="disabled" title="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-disabletitle="'+bootstrapWysiwyg.local.onlyAvailableInsideTable+'" data-enabletitle="'+bootstrapWysiwyg.local.tableAddHeaderRow+'" data-editactiveinside="table"><i class="glyphicon glyphicon-th-large"><\/i><\/a> \t\t\t<\/div> \t\t\t<div class="btn-group"> \t\t\t\t<a class="btn btn-default" data-edit="undo" title="'+bootstrapWysiwyg.local.undo+'"><i class="glyphicon glyphicon-share-alt" style="-webkit-transform: scaleX(-1); filter: FlipH;"><\/i><\/a> \t\t\t\t<a class="btn btn-default" data-edit="redo" title="'+bootstrapWysiwyg.local.redo+'"><i class="glyphicon glyphicon-share-alt"><\/i><\/a> \t\t\t<\/div> \t\t\t<div class="btn-group"> \t\t\t\t<a class="btn btn-default enterHtmlMode" title="'+bootstrapWysiwyg.local.editHtml+'"><i class="glyphicon glyphicon-console"><\/i><\/a> \t\t\t<\/div> \t\t\t<div class="btn-group htmlModeButton" style="display: none"> \t\t\t\t<a class="btn btn-default leaveHtmlMode" title="'+bootstrapWysiwyg.local.editText+'"><i class="glyphicon glyphicon-text-size"><\/i><\/a> \t\t\t<\/div>',t&&jQuery.each(t,function(n,t){var i='<div class="btn-group"> \t\t\t\t\t\t\t\t\t<a class="btn btn-default" title="'+t.title+'" data-customcallback="'+n+'"><i class="glyphicon '+t.icon+'"><\/i><\/a> \t\t\t\t\t\t\t\t  <\/div>';u+=i}),u+="<\/div>",f=jQuery(u).insertBefore(n),i(f,r),f},u=function(t){var i=n.Deferred(),r=new FileReader;return r.onload=function(n){i.resolve(n.target.result)},r.onerror=i.reject,r.onprogress=i.notify,r.readAsDataURL(t),i.promise()};n.fn.cleanHtml=function(){var t=n(this).html();return t&&t.replace(/(<br>|\s|<div><br><\/div>|&nbsp;)*$/,"")};n.fn.wysiwyg=function(i){f=n.extend({},n.fn.wysiwyg.defaults,i);var l=r(this,i.additionalButtons,f),s=jQuery("<textarea style='display: none; width: calc(100% - 10px);resize: none'><\/textarea>"),w="htmlEditor wysiwgEditor";n(this).attr("class")&&(w+=" "+n(this).attr("class"));s.attr("class",w);s.insertAfter(this);var b=n(this).html(),e=this,v,f,y,k,a=function(t){var r,i,u;for(window.getSelection?(r=window.getSelection(),r.rangeCount>0&&(i=r.getRangeAt(0).commonAncestorContainer)):(r=document.selection)&&r.type!="Control"&&(i=r.createRange().parentElement()),u=1;i;){if(i.nodeType==u&&n(i).is(t))return i;i=i.parentNode}return null},p=function(){f.activeToolbarClass&&(n(l).find(y).each(function(){var t=n(this).data(f.commandRole);document.queryCommandState(t)?n(this).addClass(f.activeToolbarClass):n(this).removeClass(f.activeToolbarClass)}),n(l).find(k).each(function(){var t=n(this).data(f.activeRole);a(t)!=null?(n(this).removeAttr("disabled"),n(this).attr("title",n(this).data("enabletitle"))):(n(this).attr("disabled","disabled"),n(this).attr("title",n(this).data("disabletitle")))}));var t=n(e).html();b!==t&&(b=t,i&&i.events&&i.events.change&&i.events.change(t))},h=function(n,t){var i=n.split(" "),r=i.shift(),u=i.join(" ")+(t||"");document.execCommand(r,0,u);p()},tt=function(t){n.each(t,function(n,t){e.keydown(n,function(n){e.attr("contenteditable")&&e.is(":visible")&&(n.preventDefault(),n.stopPropagation(),h(t))}).keyup(n,function(n){e.attr("contenteditable")&&e.is(":visible")&&(n.preventDefault(),n.stopPropagation())})})},d=function(){var n=window.getSelection();if(n.getRangeAt&&n.rangeCount)return n.getRangeAt(0)},c=function(){v=d()},o=function(){var n=window.getSelection(),t;if(v){try{n.removeAllRanges()}catch(i){document.body.createTextRange?(document.body.createTextRange().select(),document.selection.empty()):(t=document.createRange(),window.getSelection().addRange(t),window.getSelection().empty())}n.addRange(v)}},g=function(t,i){if(i.imageUploadUrl){if(t.length!=1){f.fileUploadError(bootstrapWysiwyg.local.onlyOneFileCanBeUploaded);return}if(!/^image\//.test(t[0].type)){f.fileUploadError(bootstrapWysiwyg.local.unsupportedFileType);return}i.fileUploadStarted&&i.fileUploadStarted();var s=i.imageUploadUrl.replace(/{filename}/g,encodeURIComponent(t[0].name)),r=new FormData;n.each(t,function(n,t){r.append(n,t)});n.ajax({url:s,type:"POST",data:r,cache:!1,headers:GoNorth.Util.generateAntiForgeryHeader(),processData:!1,contentType:!1}).done(function(n){var t=i.fileUploadSuccess(n);o();e.focus();h("insertimage",t);i.afterFileInserted&&i.afterFileInserted()}).fail(function(n,t){f.fileUploadError(t,n)})}else n.each(t,function(t,i){/^image\//.test(i.type)?n.when(u(i)).done(function(n){o();e.focus();h("insertimage",n)}).fail(function(){f.fileUploadError(bootstrapWysiwyg.local.couldNotReadFile)}):f.fileUploadError(bootstrapWysiwyg.local.unsupportedFileType)})},nt=function(n,t){o();document.queryCommandSupported("hiliteColor")&&document.execCommand("hiliteColor",0,t||"transparent");c();n.data(f.selectionMarker,t)},it=function(r,u){var v,f,p,w;r.find(y).click(function(){o();e.focus();h(n(this).data(u.commandRole));c()});r.find("[data-toggle=dropdown]").click(o);r.find("input[type=text][data-"+u.commandRole+"]").on("change",function(){var t=this.value;this.value="";o();t&&(e.focus(),h(n(this).data(u.commandRole),t));c()}).on("focus",function(){var t=n(this);t.data(u.selectionMarker)||(nt(t,u.selectionColor),t.focus())}).on("blur",function(){var t=n(this);t.data(u.selectionMarker)&&nt(t,!1)});r.find("input[type=file][data-"+u.commandRole+"]").change(function(){o();this.type==="file"&&this.files&&this.files.length>0&&g(this.files,i);c();this.value=""});r.find(".enterHtmlMode").click(function(){jQuery(e).hide();s.val(t(jQuery(e).html()));s.show();l.children(":not(.htmlModeButton)").hide();l.children(".htmlModeButton").show()});r.find(".leaveHtmlMode").click(function(){s.blur();s.hide();jQuery(e).show();l.children(":not(.htmlModeButton)").show();l.children(".htmlModeButton").hide()});s.blur(function(){var t=s.val(),n=t.replace(/<script[\S\s]*?>[\S\s]*?<\/script>/gmi,"");n!=t&&s.val(n);jQuery(e).html(n);u.events&&u.events.change&&u.events.change(jQuery(e).html())});v=function(n,t){for(var u=n.find("tr").first().find("td,th").length,i="<tr>",r=0;r<u;++r)i+="<"+t+"><br/><\/"+t+">";return i+"<\/tr>"};r.find(".gn-table-columns,.gn-table-rows").keydown(function(n){GoNorth.Util.validateNumberKeyPress(jQuery(this),n)});r.find(".gn-table-add").click(function(){var u=parseInt(r.find(".gn-table-columns").val()),f,l,t,s,i;if(isNaN(u)&&(u=1),f=parseInt(r.find(".gn-table-rows").val()),isNaN(f)&&(f=1),l=r.find(".gn-table-addHeader").is(":checked"),t="<div class='table-responsive'><table class='table table-bordered table-striped'>",l){for(t+="<thead><tr>",i=0;i<u;++i)t+="<th><\/th>";t+="<\/tr><\/thead>"}for(t+="<tbody>",s=0;s<f;++s){for(t+="<tr>",i=0;i<u;++i)t+="<td><\/td>";t+="<\/tr>"}t+="<\/tbody><\/table><\/div>";o();e.focus();h("insertHtml",t);c();n(this).parent(".dropdown-menu").siblings(".dropdown-toggle").dropdown("toggle")});f=function(n,t){o();e.focus();var r=window.getSelection(),i=document.createRange();i.setStartBefore(n.first()[0]);i.setEndAfter(n.last()[0]);r.removeAllRanges();r.addRange(i);h("insertHTML",t);c()};p=function(t){var u=n(a("tr")),o=u.closest("table"),i=o.clone(),s=u.index()+1,r=i.find(u.parent().prop("tagName")).children(":nth-child("+s+")"),e;if(r.parent().is("thead")){if(!t)return;r=i.find("tbody>tr").first();t=!1}e=v(i,"td");t?n(e).insertAfter(r):n(e).insertBefore(r);f(o,i[0].outerHTML)};r.find(".gn-table-add-row-after").click(function(){p(!0)});r.find(".gn-table-add-row-before").click(function(){p(!1)});r.find(".gn-table-remove-row").click(function(){var t=n(a("tr")),e=t.index()+1,r=t.closest("table"),i=r.clone(),u;i.find("tr").first().find("td,th").length>1&&(u=i.find(t.parent().prop("tagName")).children(":nth-child("+e+")"),u.remove());f(r,i[0].outerHTML)});w=function(t){var i=n(a("th,td")),r=i.index()+1,u=i.closest("table"),e=u.clone();e.find("tr").each(function(){var i="<td><br/><\/td>";n(this).parent().is("thead")&&(i="<th><br/><\/th>");t?n(i).insertAfter(n(this).find(":nth-child("+r+")")):n(i).insertBefore(n(this).find(":nth-child("+r+")"))});f(u,e[0].outerHTML)};r.find(".gn-table-add-column-after").click(function(){w(!0)});r.find(".gn-table-add-column-before").click(function(){w(!1)});r.find(".gn-table-remove-column").click(function(){var i=n(a("th,td")),u=i.index()+1,r=i.closest("table"),t=r.clone();t.find("tr").first().find("td,th").length>1&&t.find("tr").find(":nth-child("+u+")").remove();f(r,t[0].outerHTML)});r.find(".gn-table-add-header-row").click(function(){var i=n(a("table")),t,r;i.length!=0&&((t=i.clone(),r=t.find("thead"),r.find("tr").length>0)||(r.length==0&&t.prepend("<thead><\/thead>"),t.find("thead").append(v(t,"th")),f(i,t[0].outerHTML)))})},rt=function(){e.on("dragenter dragover",!1).on("drop",function(n){var t=n.originalEvent.dataTransfer;n.stopPropagation();n.preventDefault();t&&t.files&&t.files.length>0&&g(t.files,i)})};y="a[data-"+f.commandRole+"],button[data-"+f.commandRole+"],input[type=button][data-"+f.commandRole+"]";k="a[data-"+f.activeRole+"],button[data-"+f.activeRole+"],input[type=button][data-"+f.activeRole+"]";tt(f.hotKeys);f.dragAndDropImages&&rt();it(n(f.toolbarSelector),f);i.additionalButtons&&jQuery(l).find("a[data-customcallback]").click(function(){var n=i.additionalButtons[jQuery(this).data("customcallback")];n&&n.callback&&n.callback(function(n){o();n&&(e.focus(),h("insertHTML",n))})});e.attr("contenteditable",!0).on("mouseup keyup mouseout",function(){c();p()});return n(window).bind("touchend",function(n){var i=e.is(n.target)||e.has(n.target).length>0,t=d(),r=t&&t.startContainer===t.endContainer&&t.startOffset===t.endOffset;(!r||i)&&(c(),p())}),this};n.fn.wysiwyg.defaults={hotKeys:{"ctrl+h meta+h":"formatBlock <h4>","ctrl+g meta+g":"formatBlock <h5>","ctrl+b meta+b":"bold","ctrl+i meta+i":"italic","ctrl+u meta+u":"underline","ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo","ctrl+l meta+l":"justifyleft","ctrl+r meta+r":"justifyright","ctrl+e meta+e":"justifycenter","ctrl+j meta+j":"justifyfull","shift+tab":"outdent",tab:"indent"},toolbarSelector:"[data-role=editor-toolbar]",commandRole:"edit",activeRole:"editactiveinside",activeToolbarClass:"btn-info",selectionMarker:"edit-focus-marker",selectionColor:"darkgrey",dragAndDropImages:!0,showFontSize:!1,fileUploadError:function(){}}}(window.jQuery);